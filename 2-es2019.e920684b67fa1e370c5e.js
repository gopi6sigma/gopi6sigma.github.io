(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{zxzp:function(e,i,t){"use strict";t.r(i),t.d(i,"ImageUploadModule",(function(){return N}));var s=t("ofXK"),c=t("fXoL"),r=t("yTNM"),o=t("tyNb"),a=t("Bfb3"),n=t("jhN1"),d=t("3Pt+");const l=function(){return{standalone:!0}};function g(e,i){if(1&e){const e=c.Mc();c.Lc(0,"div",7),c.Lc(1,"div",8),c.Lc(2,"div",9),c.Lc(3,"img",10),c.Xc("click",(function(){c.qd(e);const t=i.index,s=i.$implicit;return c.Zc(2).editAsset(t,s,"photos")})),c.Kc(),c.Lc(4,"div",11),c.Lc(5,"input",12),c.Xc("ngModelChange",(function(t){return c.qd(e),i.$implicit.active=t}))("ngModelChange",(function(){c.qd(e);const t=i.index,s=i.$implicit;return c.Zc(2).updateActiveStatus(t,s,"photos")})),c.Kc(),c.Lc(6,"label",13),c.Gc(7,"span",14),c.Gc(8,"span",15),c.Kc(),c.Kc(),c.Gc(9,"img",16),c.Kc(),c.Lc(10,"div",17),c.Ad(11),c.Kc(),c.Kc(),c.Kc()}if(2&e){const e=i.$implicit,t=i.index;c.rc(5),c.gd("ngModel",e.active)("ngModelOptions",c.jd(7,l))("id","active_toggle_"+t)("checked",e.active),c.rc(1),c.gd("for","active_toggle_"+t),c.rc(3),c.gd("src",e.mediaUrl,c.td),c.rc(2),c.Cd(" ",e.mediaDesc," ")}}function p(e,i){if(1&e&&(c.Lc(0,"div",5),c.yd(1,g,12,8,"div",6),c.Kc()),2&e){const e=c.Zc();c.rc(1),c.gd("ngForOf",e.photosList)}}function m(e,i){if(1&e){const e=c.Mc();c.Lc(0,"div",19),c.Lc(1,"div",8),c.Lc(2,"div",9),c.Lc(3,"img",10),c.Xc("click",(function(){c.qd(e);const t=i.index,s=i.$implicit;return c.Zc(2).editAsset(t,s,"videos")})),c.Kc(),c.Lc(4,"div",11),c.Lc(5,"input",12),c.Xc("ngModelChange",(function(t){return c.qd(e),i.$implicit.active=t}))("ngModelChange",(function(){c.qd(e);const t=i.index,s=i.$implicit;return c.Zc(2).updateActiveStatus(t,s,"videos")})),c.Kc(),c.Lc(6,"label",13),c.Gc(7,"span",14),c.Gc(8,"span",15),c.Kc(),c.Kc(),c.Gc(9,"iframe",16),c.Kc(),c.Lc(10,"div",17),c.Ad(11),c.Kc(),c.Kc(),c.Kc()}if(2&e){const e=i.$implicit,t=i.index;c.rc(5),c.gd("ngModel",e.active)("ngModelOptions",c.jd(7,l))("id","active_toggle_"+t)("checked",e.active),c.rc(1),c.gd("for","active_toggle_"+t),c.rc(3),c.gd("src",e.path,c.sd),c.rc(2),c.Cd(" ",e.mediaDesc," ")}}function h(e,i){if(1&e&&(c.Lc(0,"div",5),c.yd(1,m,12,8,"div",18),c.Kc()),2&e){const e=c.Zc();c.rc(1),c.gd("ngForOf",e.videosList)}}const u=function(e){return{active:e}};let f=(()=>{class e{constructor(e,i,t,s){this.apiService=e,this.router=i,this.imageUploadService=t,this.sanitizer=s,this.labelsList=[],this.photosList=[],this.isFirstTimeVideoOpen=!0,this.videosList=[],this.isImageView=!0}ngOnInit(){this.getGalleryImages("photos"),this.imageUploadService.refreshAssets.subscribe(e=>{e&&e.type&&this.getGalleryImages(e.type)})}onClickVideo(){this.isImageView=!1,this.isFirstTimeVideoOpen&&this.getGalleryImages("videos")}editAsset(e,i,t){this.imageUploadService.editAssets.next({index:e,asset:i,type:t})}updateActiveStatus(e,i,t){const s={isActive:i.active};try{this.apiService.showLoader.next(!0),this.apiService.updateGalleryAssetStatus(s,i.mediaUrl).subscribe(e=>{this.apiService.showLoader.next(!1)},e=>{if(this.apiService.showLoader.next(!1),401!==e.status){if(e.error){const i="string"==typeof e.error?JSON.parse(e.error):{};this.apiService.genericMessage(i.error||"something went wrong","error")}}else this.router.navigate(["/login"])})}catch(c){console.warn(c)}}getGalleryImages(e){try{this.apiService.showLoader.next(!0),this.apiService.getAllGalleryImages(e).subscribe(i=>{this.apiService.showLoader.next(!1),"videos"===e?(this.videosList=i,this.videosList=this.videosList.map(e=>(e.path=e.mediaUrl,e.path&&(e.path=e.path.split('"').filter(e=>e).join(),e.path=this.sanitizer.bypassSecurityTrustResourceUrl(e.path)),e))):this.photosList=i},e=>{if(this.apiService.showLoader.next(!1),401!==e.status){if(e.error){const i="string"==typeof e.error?JSON.parse(e.error):{};this.apiService.genericMessage(i.error||"something went wrong","error")}}else this.router.navigate(["/login"])})}catch(i){console.warn(i)}}}return e.\u0275fac=function(i){return new(i||e)(c.Fc(r.a),c.Fc(o.c),c.Fc(a.a),c.Fc(n.b))},e.\u0275cmp=c.zc({type:e,selectors:[["app-images-preview-list"]],inputs:{labelsList:"labelsList"},decls:9,vars:8,consts:[[1,"images-preview","mr-4"],[1,"row","justify-content-center","custom-tabs"],[1,"list-unstyled"],[3,"ngClass","click"],["class","row m-t-20",4,"ngIf"],[1,"row","m-t-20"],["class","col-12 col-sm-6 col-md-4",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-md-4"],[1,"images-preview__wrapper"],[1,"images-preview__img-parent"],["src","assets/icons/edit-ico.svg","alt","edit",1,"edit-icon-img",3,"click"],[1,"onoffswitch","images-preview__toggle-switch"],["type","checkbox","name","onoffswitch",1,"onoffswitch-checkbox",3,"ngModel","ngModelOptions","id","checked","ngModelChange"],[1,"onoffswitch-label",3,"for"],[1,"onoffswitch-inner"],[1,"onoffswitch-switch"],[1,"w-100",3,"src"],[1,"text-center","image-description"],["class","col-12 col-sm-6 col-md-6",4,"ngFor","ngForOf"],[1,"col-12","col-sm-6","col-md-6"]],template:function(e,i){1&e&&(c.Lc(0,"div",0),c.Lc(1,"div",1),c.Lc(2,"ul",2),c.Lc(3,"li",3),c.Xc("click",(function(){return i.isImageView=!0})),c.Ad(4," Image "),c.Kc(),c.Lc(5,"li",3),c.Xc("click",(function(){return i.onClickVideo()})),c.Ad(6," Video "),c.Kc(),c.Kc(),c.Kc(),c.yd(7,p,2,1,"div",4),c.yd(8,h,2,1,"div",4),c.Kc()),2&e&&(c.rc(3),c.gd("ngClass",c.kd(4,u,i.isImageView)),c.rc(2),c.gd("ngClass",c.kd(6,u,!i.isImageView)),c.rc(2),c.gd("ngIf",i.isImageView),c.rc(1),c.gd("ngIf",!i.isImageView))},directives:[s.j,s.l,s.k,d.a,d.l,d.o],styles:[".images-preview__wrapper[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px;box-shadow:0 2px 5px 0 rgba(0,0,0,.16),0 2px 10px 0 rgba(0,0,0,.12);padding:5px;border-radius:2px;position:relative}.images-preview__img-parent[_ngcontent-%COMP%]{padding:0}.images-preview__img-parent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:300px;max-width:100%;-o-object-fit:contain;object-fit:contain}.images-preview__img-parent[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:300px;max-width:100%;-o-object-fit:cover;object-fit:cover}.images-preview__img-parent[_ngcontent-%COMP%]   .edit-icon-img[_ngcontent-%COMP%]{width:20px;height:20px;position:absolute;right:82px;top:15px;cursor:pointer}.images-preview[_ngcontent-%COMP%]   .image-description[_ngcontent-%COMP%]{font-size:18px;color:#6e63ff;font-style:italic}.images-preview__toggle-switch[_ngcontent-%COMP%]{position:absolute;right:10px;top:10px}"]}),e})();var v=t("KCrP");function y(e,i){if(1&e&&c.Gc(0,"img",27),2&e){const e=c.Zc(2);c.gd("src",e.previewImage,c.td)}}function w(e,i){if(1&e){const e=c.Mc();c.Lc(0,"div",30),c.Lc(1,"img",31),c.Xc("click",(function(){return c.qd(e),c.Zc(3).showGallery()})),c.Kc(),c.Lc(2,"span",32),c.Xc("click",(function(){c.qd(e);const t=i.$implicit,s=i.index;return c.Zc(3).removeImg(t,s)})),c.Gc(3,"img",33),c.Kc(),c.Kc()}if(2&e){const e=i.$implicit;c.rc(1),c.hd("src",e,c.td)}}function b(e,i){if(1&e&&(c.Lc(0,"div",28),c.yd(1,w,4,1,"div",29),c.Kc()),2&e){const e=c.Zc(2);c.rc(1),c.gd("ngForOf",e.previewImages)}}function L(e,i){if(1&e){const e=c.Mc();c.Lc(0,"div",20),c.Lc(1,"section",21),c.Xc("onFileDropped",(function(i){return c.qd(e),c.Zc().uploadFile(i)})),c.yd(2,y,1,1,"img",22),c.yd(3,b,2,1,"div",23),c.Kc(),c.Lc(4,"input",24,25),c.Xc("change",(function(i){return c.qd(e),c.Zc().fileProgress(i)})),c.Kc(),c.Lc(6,"button",26),c.Xc("click",(function(){return c.qd(e),c.pd(5).click()})),c.Ad(7," Browse Images "),c.Kc(),c.Kc()}if(2&e){const e=c.Zc();c.rc(2),c.gd("ngIf",!e.previewImages.length),c.rc(1),c.gd("ngIf",e.previewImages&&e.previewImages.length)}}function x(e,i){1&e&&(c.Lc(0,"div",35),c.Ad(1," Please Enter Event Name "),c.Kc())}function I(e,i){if(1&e&&(c.Lc(0,"div",10),c.Lc(1,"label",11),c.Ad(2," Video Link "),c.Lc(3,"span",12),c.Ad(4,"*"),c.Kc(),c.Kc(),c.Gc(5,"input",34),c.yd(6,x,2,0,"div",14),c.Kc()),2&e){const e=c.Zc();c.rc(6),c.gd("ngIf",(e.galleryUpload.get("videoUrl").touched||e.formSubmitted)&&e.galleryUpload.get("videoUrl").hasError("required"))}}function K(e,i){1&e&&(c.Lc(0,"div",35),c.Ad(1," Please Enter Event Name "),c.Kc())}function S(e,i){1&e&&(c.Lc(0,"div",35),c.Ad(1," Please Enter Event Place "),c.Kc())}function U(e,i){1&e&&(c.Lc(0,"div",35),c.Ad(1," Please Enter Event Description "),c.Kc())}function A(e,i){if(1&e){const e=c.Mc();c.Lc(0,"div",36),c.Ad(1),c.Lc(2,"button",37),c.Xc("click",(function(){return c.qd(e),c.Zc().hideAlert()})),c.Lc(3,"span",38),c.Ad(4,"\xd7"),c.Kc(),c.Kc(),c.Kc()}if(2&e){const e=c.Zc();c.rc(1),c.Cd(" ",e.serverResponce," ")}}function C(e,i){if(1&e){const e=c.Mc();c.Lc(0,"button",39),c.Xc("click",(function(){return c.qd(e),c.Zc().sendDetails()})),c.Ad(1," Submit "),c.Kc()}}function _(e,i){if(1&e){const e=c.Mc();c.Lc(0,"button",39),c.Xc("click",(function(){return c.qd(e),c.Zc().updateAssetDetails()})),c.Ad(1," Submit "),c.Kc()}}const k=function(e){return{active:e}};let O=(()=>{class e{constructor(e,i,t,s,c){this.fb=e,this.cd=i,this.apiService=t,this.router=s,this.imageUploadService=c,this.labelsList=[],this.serverResponce="",this.isResponceSuccess=!1,this.isImageUpload=!0,this.galleryImages=[],this.previewImages=[],this.maxDate=(new Date).toLocaleDateString(),this.formSubmitted=!1,this.previewImage="https://h5p.org/sites/default/files/styles/medium-logo/public/logos/drag-and-drop-icon.png?itok=0dFV3ej6",this.url="https://h5p.org/sites/default/files/styles/medium-logo/public/logos/drag-and-drop-icon.png?itok=0dFV3ej6",this.editAssetObj={},this.editAsset=!1}ngOnInit(){this.galleryUpload=this.fb.group({mediaName:["",d.t.required],mediaDesc:["",d.t.required],mediaPlace:["",d.t.required],image:["",d.t.required]}),this.imageUploadService.editAssets.subscribe(e=>{e&&Object.keys(e).length&&e.asset&&(this.isImageUpload="photos"===e.type,this.editAssetObj=e,this.editAsset=!0,this.galleryUpload.patchValue({...e.asset}))})}updateAssetDetails(){const e={...this.galleryUpload.value},i={mediaName:e.mediaName,mediaType:e.mediaType,mediaDesc:e.mediaDesc,mediaPlace:e.mediaPlace};try{this.apiService.showLoader.next(!0),this.apiService.updateGalleryAssetStatus(i,this.editAssetObj.asset.mediaUrl).subscribe(e=>{if(this.apiService.showLoader.next(!1),e&&"string"==typeof e){const i=JSON.parse(e);this.apiService.genericMessage(i.message,"success"),this.imageUploadService.refreshAssets.next({time:(new Date).getTime(),type:this.editAssetObj.type}),this.editAsset=!1,this.galleryUpload.reset()}},e=>{if(this.apiService.showLoader.next(!1),401!==e.status){if(e.error){const i="string"==typeof e.error?JSON.parse(e.error):{};this.apiService.genericMessage(i.error||"something went wrong","error")}}else this.router.navigate(["/login"])})}catch(t){console.warn(t)}}imageUpload(){this.isImageUpload=!0,this.galleryUpload.contains("videoUrl")&&(this.previewImage=this.url,this.galleryUpload.addControl("image",this.fb.control("",[d.t.required])),this.galleryUpload.removeControl("videoUrl"))}videoUpload(){this.isImageUpload=!1,this.galleryUpload.contains("image")&&(this.galleryUpload.addControl("videoUrl",this.fb.control("",[d.t.required])),this.galleryUpload.removeControl("image"))}hideAlert(){this.isResponceSuccess=!1}sendDetails(){try{let e="photos";const i={...this.galleryUpload.value};i.mediaType=this.isImageUpload?"photos":"videos";let t=new FormData;this.isImageUpload?(t=new FormData,delete i.image,i.mediaType="photos",this.galleryImages.forEach(e=>{t.append("gallery",e)}),t.append("galleryStr",JSON.stringify({...i}))):(i.mediaType="videos",delete i.videoUrl,e="videos",t.append("gallery",JSON.stringify(this.galleryUpload.get("videoUrl").value)),t.append("galleryStr",JSON.stringify({...i}))),this.apiService.showLoader.next(!0),this.apiService.addGallery(t,e).subscribe(e=>{if(this.apiService.showLoader.next(!1),e&&"string"==typeof e){const t=JSON.parse(e);t&&t.message&&(this.imageUploadService.refreshAssets.next({time:(new Date).getTime(),type:i.mediaType}),this.galleryImages=[],this.previewImages=[],this.galleryUpload.reset(),this.apiService.genericMessage(t.message,"success"))}},e=>{if(this.apiService.showLoader.next(!1),401!==e.status){if(e.error){const i="string"==typeof e.error?JSON.parse(e.error):{};this.apiService.genericMessage(i.error||"something went wrong","error")}}else this.router.navigate(["/login"])})}catch(e){console.warn(e)}}fileProgress(e){this.uploadFile(e.target.files)}uploadFile(e){const i=new FileReader,t=e[0];e&&(i.readAsDataURL(t),i.onload=e=>{this.galleryImages.push(t),this.previewImages.push(e.target.result)},this.cd.markForCheck())}removeImg(e,i){this.previewImages.splice(i,1),this.galleryImages.splice(i,1)}showGallery(){console.log("Show Gallery functions")}}return e.\u0275fac=function(i){return new(i||e)(c.Fc(d.d),c.Fc(c.j),c.Fc(r.a),c.Fc(o.c),c.Fc(a.a))},e.\u0275cmp=c.zc({type:e,selectors:[["app-new-image-upload"]],inputs:{labelsList:"labelsList"},decls:39,vars:15,consts:[[1,"card","shadow"],[1,"card-body"],[1,"title"],[1,"card-text"],[1,"row","justify-content-center","custom-tabs","mb-2"],[1,"list-unstyled"],[3,"ngClass","click"],["class","dnd-wraper my-2",4,"ngIf"],[3,"formGroup"],["class","form-group",4,"ngIf"],[1,"form-group"],[1,"label"],[1,"required-star"],["type","text","formControlName","mediaName","id","mediaName",1,"form-control"],["class","f-14 error-message",4,"ngIf"],["type","text","formControlName","mediaPlace","id","mediaPlace",1,"form-control"],["formControlName","mediaDesc","rows","4",1,"form-control"],["class","alert alert-success f-14 alert-dismissible fade show","role","alert",4,"ngIf"],[1,"d-flex"],["type","submit","class","mx-auto my-btn  my-btn-primary shadow",3,"click",4,"ngIf"],[1,"dnd-wraper","my-2"],["appDragAndDrop","",1,"dnd-container",3,"onFileDropped"],["class","preview","alt","image",3,"src",4,"ngIf"],["class","d-flex justify-content-start flex-wrap",4,"ngIf"],["type","file","name","file",1,"form-control","d-none",3,"change"],["fileInput",""],["type","button",1,"my-btn","my-btn-primary","w-100",3,"click"],["alt","image",1,"preview",3,"src"],[1,"d-flex","justify-content-start","flex-wrap"],["class","position-relative",4,"ngFor","ngForOf"],[1,"position-relative"],["width","70","height","70",1,"m-1",3,"src","click"],[1,"position-absolute","text-white",2,"top","0","right","0",3,"click"],["src","https://upload.wikimedia.org/wikipedia/commons/thumb/8/8f/Flat_cross_icon.svg/1200px-Flat_cross_icon.svg.png","width","15",1,"hover",2,"margin-top","-5px"],["type","text","formControlName","videoUrl","id","studentName",1,"form-control"],[1,"f-14","error-message"],["role","alert",1,"alert","alert-success","f-14","alert-dismissible","fade","show"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["type","submit",1,"mx-auto","my-btn","my-btn-primary","shadow",3,"click"]],template:function(e,i){1&e&&(c.Lc(0,"div",0),c.Lc(1,"div",1),c.Lc(2,"h3",2),c.Ad(3,"Upload Here"),c.Kc(),c.Lc(4,"div",3),c.Lc(5,"div",4),c.Lc(6,"ul",5),c.Lc(7,"li",6),c.Xc("click",(function(){return i.imageUpload()})),c.Ad(8," Image "),c.Kc(),c.Lc(9,"li",6),c.Xc("click",(function(){return i.videoUpload()})),c.Ad(10," Video "),c.Kc(),c.Kc(),c.Kc(),c.yd(11,L,8,2,"div",7),c.Lc(12,"form",8),c.yd(13,I,7,1,"div",9),c.Lc(14,"div",10),c.Lc(15,"label",11),c.Ad(16," Event Name "),c.Lc(17,"span",12),c.Ad(18,"*"),c.Kc(),c.Kc(),c.Gc(19,"input",13),c.yd(20,K,2,0,"div",14),c.Kc(),c.Lc(21,"div",10),c.Lc(22,"label",11),c.Ad(23," Event Place "),c.Lc(24,"span",12),c.Ad(25,"*"),c.Kc(),c.Kc(),c.Gc(26,"input",15),c.yd(27,S,2,0,"div",14),c.Kc(),c.Lc(28,"div",10),c.Lc(29,"label",11),c.Ad(30," Event Description "),c.Lc(31,"span",12),c.Ad(32,"*"),c.Kc(),c.Kc(),c.Gc(33,"textarea",16),c.yd(34,U,2,0,"div",14),c.Kc(),c.yd(35,A,5,1,"div",17),c.Lc(36,"div",18),c.yd(37,C,2,0,"button",19),c.yd(38,_,2,0,"button",19),c.Kc(),c.Kc(),c.Kc(),c.Kc(),c.Kc()),2&e&&(c.rc(7),c.gd("ngClass",c.kd(11,k,i.isImageUpload)),c.rc(2),c.gd("ngClass",c.kd(13,k,!i.isImageUpload)),c.rc(2),c.gd("ngIf",i.isImageUpload&&!i.editAsset),c.rc(1),c.gd("formGroup",i.galleryUpload),c.rc(1),c.gd("ngIf",!i.isImageUpload&&!i.editAsset),c.rc(7),c.gd("ngIf",(i.galleryUpload.get("mediaName").touched||i.formSubmitted)&&i.galleryUpload.get("mediaName").hasError("required")),c.rc(7),c.gd("ngIf",(i.galleryUpload.get("mediaPlace").touched||i.formSubmitted)&&i.galleryUpload.get("mediaPlace").hasError("required")),c.rc(7),c.gd("ngIf",(i.galleryUpload.get("mediaDesc").touched||i.formSubmitted)&&i.galleryUpload.get("mediaDesc").hasError("required")),c.rc(1),c.gd("ngIf",i.isResponceSuccess),c.rc(2),c.gd("ngIf",!i.editAsset),c.rc(1),c.gd("ngIf",i.editAsset))},directives:[s.j,s.l,d.v,d.m,d.f,d.c,d.l,d.e,v.a,s.k],styles:[".title[_ngcontent-%COMP%]{font-weight:500;text-align:center}.dnd-container[_ngcontent-%COMP%]{width:100%;margin:auto;height:10rem;border:1px dashed #745cf2}.dnd-container[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{width:100%;height:100%}.label[_ngcontent-%COMP%]{display:inline-block;min-width:100px}.register-link[_ngcontent-%COMP%]{margin-top:20px;display:inline-block;text-decoration:underline!important;font-size:18px}"]}),e})(),M=(()=>{class e{constructor(){this.labelsList=[]}ngOnInit(){this.labelsList=["2020 Team","2019 Team","2017 Team","2016 Team"]}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=c.zc({type:e,selectors:[["app-images-upload-wrapper"]],decls:5,vars:2,consts:[[1,"d-flex"],[1,"preview"],[3,"labelsList"],[1,"create-new"]],template:function(e,i){1&e&&(c.Lc(0,"div",0),c.Lc(1,"div",1),c.Gc(2,"app-images-preview-list",2),c.Kc(),c.Lc(3,"div",3),c.Gc(4,"app-new-image-upload",2),c.Kc(),c.Kc()),2&e&&(c.rc(2),c.gd("labelsList",i.labelsList),c.rc(2),c.gd("labelsList",i.labelsList))},directives:[f,O],styles:[".preview[_ngcontent-%COMP%]{flex-basis:75%}.create-new[_ngcontent-%COMP%]{flex-basis:25%}"]}),e})();var P=t("PCNd");const F=[{path:"",component:M}];let N=(()=>{class e{}return e.\u0275mod=c.Dc({type:e}),e.\u0275inj=c.Cc({factory:function(i){return new(i||e)},imports:[[s.b,o.g.forChild(F),d.s,d.g,P.a]]}),e})()}}]);