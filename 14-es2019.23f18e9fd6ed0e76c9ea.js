(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{zB1Z:function(t,e,s){"use strict";s.r(e),s.d(e,"PapersModule",(function(){return K}));var c=s("ofXK"),i=s("3Pt+"),r=s("tyNb"),n=s("R0Ic"),a=s("fXoL"),o=s("yTNM"),d=s("1kSV");const l=["anchor"],u=function(t){return{active:t}};function p(t,e){if(1&t){const t=a.Mc();a.Lc(0,"div",25),a.Lc(1,"ul",8),a.Lc(2,"li",9),a.Xc("click",(function(){return a.qd(t),a.Zc().selectStatus(" ")})),a.Ad(3),a.Kc(),a.Lc(4,"li",9),a.Xc("click",(function(){return a.qd(t),a.Zc().selectStatus("IN_PROGRESS")})),a.Ad(5),a.Kc(),a.Lc(6,"li",9),a.Xc("click",(function(){return a.qd(t),a.Zc().selectStatus("VERIFIED")})),a.Ad(7),a.Kc(),a.Lc(8,"li",9),a.Xc("click",(function(){return a.qd(t),a.Zc().selectStatus("REJECTED")})),a.Ad(9),a.Kc(),a.Kc(),a.Kc()}if(2&t){const t=a.Zc();a.rc(2),a.gd("ngClass",a.kd(8,u," "==t.selectedStatus)),a.rc(1),a.Cd(" All (",t.allPapers,") "),a.rc(1),a.gd("ngClass",a.kd(10,u,"IN_PROGRESS"==t.selectedStatus)),a.rc(1),a.Cd(" Pending (",t.pendingPapers,") "),a.rc(1),a.gd("ngClass",a.kd(12,u,"VERIFIED"==t.selectedStatus)),a.rc(1),a.Cd(" Verified (",t.verifiedPapers,") "),a.rc(1),a.gd("ngClass",a.kd(14,u,"REJECTED"==t.selectedStatus)),a.rc(1),a.Cd(" Rejected (",t.rejectedPapers,") ")}}function h(t,e){if(1&t){const t=a.Mc();a.Lc(0,"div",25),a.Lc(1,"form",26),a.Xc("ngSubmit",(function(){return a.qd(t),a.Zc().getPapersByUser()})),a.Lc(2,"div",27),a.Lc(3,"input",28),a.Xc("ngModelChange",(function(e){return a.qd(t),a.Zc().userName=e})),a.Kc(),a.Lc(4,"button",29),a.Ad(5," submit "),a.Kc(),a.Kc(),a.Kc(),a.Kc()}if(2&t){const t=a.Zc();a.rc(3),a.gd("ngModel",t.userName),a.rc(1),a.gd("disabled",!t.userName)}}const g=function(t){return{selected:t}};function f(t,e){if(1&t){const t=a.Mc();a.Lc(0,"tr",30),a.Lc(1,"td",31),a.Xc("click",(function(){a.qd(t);const s=e.index;return a.Zc().selectPaper(s)})),a.Ad(2),a.Kc(),a.Lc(3,"td",31),a.Xc("click",(function(){a.qd(t);const s=e.index;return a.Zc().selectPaper(s)})),a.Ad(4),a.Kc(),a.Lc(5,"td",31),a.Xc("click",(function(){a.qd(t);const s=e.index,c=a.Zc(),i=a.pd(39);return c.deletePaper(i,s)})),a.Gc(6,"img",32),a.Kc(),a.Kc()}if(2&t){const t=e.$implicit,s=e.index,c=a.Zc();a.gd("ngClass",a.kd(3,g,c.selectedIndex==s)),a.rc(2),a.Cd(" ",t.userName?t.userName:t.name," "),a.rc(2),a.Cd(" ",t.status," ")}}function m(t,e){1&t&&(a.Lc(0,"tr"),a.Lc(1,"td",33),a.Ad(2,"No data found!"),a.Kc(),a.Kc())}function b(t,e){1&t&&(a.Lc(0,"div",34),a.Ad(1," Loading more papers... "),a.Kc())}function L(t,e){if(1&t){const t=a.Mc();a.Lc(0,"div",35),a.Lc(1,"button",36),a.Xc("click",(function(){return(0,e.dismiss)("Cross click")})),a.Lc(2,"span",37),a.Ad(3,"\xd7"),a.Kc(),a.Kc(),a.Kc(),a.Lc(4,"div",38),a.Lc(5,"div",39),a.Lc(6,"div",40),a.Lc(7,"div",41),a.Ad(8,"Are you sure,"),a.Kc(),a.Lc(9,"div",41),a.Ad(10,"Do You want to delete this paper"),a.Kc(),a.Kc(),a.Kc(),a.Lc(11,"div",42),a.Lc(12,"button",43),a.Xc("click",(function(){return(0,e.dismiss)("Cross click")})),a.Ad(13," \xa0 \xa0 Cancel \xa0 \xa0"),a.Kc(),a.Ad(14,"\xa0 \xa0 "),a.Lc(15,"button",44),a.Xc("click",(function(){a.qd(t);const e=a.Zc();return e.confirmDelete(e.deleteItemIndex)})),a.Ad(16," \xa0 \xa0 Delete \xa0 \xa0"),a.Kc(),a.Ad(17,"\xa0 "),a.Kc(),a.Kc()}}let v=(()=>{class t{constructor(t,e,s,c){this.apiService=t,this.router=e,this.modalService=s,this.config=c,this.allPapersList=[],this.papersList=[],this.selectedPath="",this.selectedIndex=0,this.isBasedOnStatus=!0,this.selectedStatus="IN_PROGRESS",this.user="",this.userName="",this.deleteItemIndex=0,this.rejectedPapers=0,this.verifiedPapers=0,this.pendingPapers=0,this.allPapers=0,this.offset=0,this.limit=50,this.isLoading=!1,this.shouldLoadPapers=!0,this.state="default",this.config.backdrop="static",this.config.keyboard=!1}ngOnInit(){this.user=JSON.parse(localStorage.getItem("adminUser"))||null,this.loadPapersCounts(),this.papersList=[{id:1,evaluator:"paper1",imageUrl:"https://cdn.pixabay.com/photo/2017/08/11/14/02/paper-2631126_1280.jpg",status:"Rejected"}],this.selectedPath=this.papersList[0].path}ngAfterViewInit(){this.observer=new IntersectionObserver(([t])=>{t.isIntersecting&&!this.isLoading&&this.loadMorePapers()}),this.observer.observe(this.anchor.nativeElement),this.apiService.showLoader.next(!0),this.loadMorePapers()}loadMorePapers(){this.isLoading=!0,this.apiService.fetchPapersBasedOnStatus(this.selectedStatus,this.offset,this.limit).subscribe(t=>{this.allPapersList=[...this.allPapersList,...t],this.offset+=this.limit,this.isLoading=!1,this.apiService.showLoader.next(!1)},t=>{this.isLoading=!1,this.handleError(t)})}loadPapersCounts(){this.apiService.getStatusCounts().subscribe({next:t=>{this.verifiedPapers=t.VERIFIED,this.pendingPapers=t.IN_PROGRESS,this.rejectedPapers=t.REJECTED,this.allPapers=t.VERIFIED+t.IN_PROGRESS+t.REJECTED,console.log(t)},error:t=>{console.error("Failed to load status counts",t)}})}handleError(t){this.apiService.showLoader.next(!1),401!==t.status?(this.apiService.genericMessage(t.error&&t.error.message&&t.error.message||"something went wrong","error"),console.log(t)):this.router.navigate(["/login"])}getPapersByUser(){this.apiService.showLoader.next(!0),this.apiService.fetchPapersBasedOnUser(this.userName).subscribe(t=>{this.apiService.showLoader.next(!1),this.allPapersList=t},t=>{this.handleError(t)})}selectType(t){this.isBasedOnStatus="user"!=t,this.allPapersList=[],this.selectedPath="",this.isBasedOnStatus?(this.observer.observe(this.anchor.nativeElement),this.selectStatus("IN_PROGRESS")):this.observer.disconnect()}selectStatus(t){this.selectedStatus=t,this.offset=0,this.allPapersList=[],this.loadMorePapers()}selectPaper(t){this.selectedIndex=t,this.selectedPath=this.allPapersList[t].signedImageUrl||this.allPapersList[t].imageUrl}deletePaper(t,e){this.deleteItemIndex=e,this.modalService.open(t)}confirmDelete(t){let e=this.papersList[t].imageUrl,s=this.papersList[t].status;this.apiService.showLoader.next(!0),this.apiService.deletePapers(e,s).subscribe(e=>{this.modalService.dismissAll(),this.apiService.showLoader.next(!1),this.papersList.splice(t,1)},t=>{this.modalService.dismissAll(),this.handleError(t)})}rotate(){this.state="default"===this.state?"rotate90":"rotate90"===this.state?"rotate180":"rotate180"===this.state?"rotate270":"default"}}return t.\u0275fac=function(e){return new(e||t)(a.Fc(o.a),a.Fc(r.c),a.Fc(d.d),a.Fc(d.e))},t.\u0275cmp=a.zc({type:t,selectors:[["app-papers-list"]],viewQuery:function(t,e){var s;1&t&&a.wd(l,!0),2&t&&a.od(s=a.Yc())&&(e.anchor=s.first)},decls:40,vars:13,consts:[[1,"page"],[1,"page-header","f-22","m-t-5","m-b-20","font-italic"],[1,"page-content"],[1,"row"],[1,"col-md-6"],[1,"w-100","m-auto"],[1,"d-flex","justify-content-between"],[1,"d-flex","custom-tabs","m-b-16"],[1,"list-unstyled","d-flex"],[3,"ngClass","click"],["class","d-flex justify-content-center custom-tabs m-b-16",4,"ngIf"],[1,"scrollbar","papers-list"],[1,"table-responsive"],[1,"table","text-center"],[1,"table-dark"],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[2,"height","1px"],["anchor",""],["class","text-center p-2",4,"ngIf"],[1,"col-md-6","img-container"],[1,"button-wrapper"],[1,"my-btn","my-btn-primary","mt-5","mb-4",3,"click"],[1,"img",3,"src"],["content",""],[1,"d-flex","justify-content-center","custom-tabs","m-b-16"],[3,"ngSubmit"],[1,"input-wrapper"],["type","text","name","userName",1,"form-control","form-control-sm","custom-input",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-sm","my-btn-primary",3,"disabled"],[3,"ngClass"],[1,"hover",3,"click"],["src","/assets/icons/delete_icon.png","width","20"],["colspan","4"],[1,"text-center","p-2"],[1,"modal-header","border-bottom-0"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"container-fluid",2,"padding","24px"],[1,"row","justify-content-center"],[1,"col-10","text-center"],[2,"font-weight","500"],[1,"d-flex","justify-content-center","pb-2","mt-3"],[1,"text-black-50","btn","btn-light","rounded-pill","hover",2,"font-weight","400","border","1px solid grey",3,"click"],[1,"text-white","rounded-pill","btn","btn-danger","hover",2,"font-weight","400",3,"click"]],template:function(t,e){1&t&&(a.Lc(0,"div",0),a.Lc(1,"h1",1),a.Ad(2,"Papers List"),a.Kc(),a.Lc(3,"div",2),a.Lc(4,"div",3),a.Lc(5,"div",4),a.Lc(6,"div",5),a.Lc(7,"div",6),a.Lc(8,"div",7),a.Lc(9,"ul",8),a.Lc(10,"li",9),a.Xc("click",(function(){return e.selectType("user")})),a.Ad(11," Registration Number "),a.Kc(),a.Lc(12,"li",9),a.Xc("click",(function(){return e.selectType("status")})),a.Ad(13," Verification Status "),a.Kc(),a.Kc(),a.Kc(),a.yd(14,p,10,16,"div",10),a.yd(15,h,6,2,"div",10),a.Kc(),a.Lc(16,"div",11),a.Lc(17,"div",12),a.Lc(18,"table",13),a.Lc(19,"thead",14),a.Lc(20,"tr"),a.Lc(21,"th"),a.Ad(22,"User Name"),a.Kc(),a.Lc(23,"th"),a.Ad(24,"Status"),a.Kc(),a.Lc(25,"th"),a.Ad(26,"Options"),a.Kc(),a.Kc(),a.Kc(),a.Lc(27,"tbody"),a.yd(28,f,7,5,"tr",15),a.yd(29,m,3,0,"tr",16),a.Kc(),a.Kc(),a.Gc(30,"div",17,18),a.yd(32,b,2,0,"div",19),a.Kc(),a.Kc(),a.Kc(),a.Kc(),a.Lc(33,"div",20),a.Lc(34,"div",21),a.Lc(35,"button",22),a.Xc("click",(function(){return e.rotate()})),a.Ad(36," Rotate "),a.Kc(),a.Kc(),a.Gc(37,"img",23),a.Kc(),a.Kc(),a.Kc(),a.yd(38,L,18,0,"ng-template",null,24,a.zd),a.Kc()),2&t&&(a.rc(10),a.gd("ngClass",a.kd(9,u,!e.isBasedOnStatus)),a.rc(2),a.gd("ngClass",a.kd(11,u,e.isBasedOnStatus)),a.rc(2),a.gd("ngIf",e.isBasedOnStatus),a.rc(1),a.gd("ngIf",!e.isBasedOnStatus),a.rc(13),a.gd("ngForOf",e.allPapersList),a.rc(1),a.gd("ngIf",!e.papersList.length),a.rc(3),a.gd("ngIf",e.isLoading),a.rc(5),a.gd("@rotatedState",e.state)("src",e.selectedPath,a.td))},directives:[c.j,c.l,c.k,i.v,i.m,i.n,i.c,i.l,i.o],styles:[".img-container[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:100%}.img-path[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:3rem;border-radius:50%}.selected[_ngcontent-%COMP%]{background-color:rgba(146,56,174,.1)}.hover[_ngcontent-%COMP%]:hover{cursor:pointer}.papers-list[_ngcontent-%COMP%]{max-height:90vh!important;overflow-y:auto}.custom-tabs[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:2px 20px!important;min-width:auto}.custom-input[_ngcontent-%COMP%]{padding:0 15px}.input-wrapper[_ngcontent-%COMP%]{display:flex;flex:1 1 auto}"],data:{animation:[Object(n.j)("rotatedState",[Object(n.g)("default",Object(n.h)({transform:"rotate(0)"})),Object(n.g)("rotate90",Object(n.h)({transform:"rotate(90deg)"})),Object(n.g)("rotate180",Object(n.h)({transform:"rotate(180deg)"})),Object(n.g)("rotate270",Object(n.h)({transform:"rotate(270deg)"})),Object(n.i)("default => rotate90",Object(n.e)("400ms ease-in")),Object(n.i)("rotate90 => rotate180",Object(n.e)("400ms ease-in")),Object(n.i)("rotate180 => rotate270",Object(n.e)("400ms ease-out")),Object(n.i)("rotate270 => default",Object(n.e)("400ms ease-out"))])]}}),t})();const P=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=a.zc({type:t,selectors:[["app-papers"]],decls:1,vars:0,template:function(t,e){1&t&&a.Gc(0,"router-outlet")},directives:[r.h],styles:[""]}),t})(),children:[{path:"paper-list",component:v},{path:"**",redirectTo:"paper-list",pathMatch:"full"}]}];let S=(()=>{class t{}return t.\u0275mod=a.Dc({type:t}),t.\u0275inj=a.Cc({factory:function(e){return new(e||t)},imports:[[r.g.forChild(P)],r.g]}),t})(),K=(()=>{class t{}return t.\u0275mod=a.Dc({type:t}),t.\u0275inj=a.Cc({factory:function(e){return new(e||t)},imports:[[c.b,S,i.g]]}),t})()}}]);