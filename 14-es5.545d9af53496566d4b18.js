function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a=[],s=!0,c=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(o){c=!0,i=o}finally{try{s||null==r.return||r.return()}finally{if(c)throw i}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{zB1Z:function(e,t,r){"use strict";r.r(t),r.d(t,"PapersModule",(function(){return O}));var n=r("ofXK"),i=r("3Pt+"),a=r("tyNb"),s=r("R0Ic"),c=r("fXoL"),o=r("yTNM"),l=r("1kSV"),d=["anchor"],u=function(e){return{active:e}};function p(e,t){if(1&e){var r=c.Mc();c.Lc(0,"div",25),c.Lc(1,"ul",8),c.Lc(2,"li",9),c.Xc("click",(function(){return c.sd(r),c.bd().selectStatus(" ")})),c.Cd(3),c.Kc(),c.Lc(4,"li",9),c.Xc("click",(function(){return c.sd(r),c.bd().selectStatus("IN_PROGRESS")})),c.Cd(5),c.Kc(),c.Lc(6,"li",9),c.Xc("click",(function(){return c.sd(r),c.bd().selectStatus("VERIFIED")})),c.Cd(7),c.Kc(),c.Lc(8,"li",9),c.Xc("click",(function(){return c.sd(r),c.bd().selectStatus("REJECTED")})),c.Cd(9),c.Kc(),c.Kc(),c.Kc()}if(2&e){var n=c.bd();c.rc(2),c.id("ngClass",c.md(8,u," "==n.selectedStatus)),c.rc(1),c.Ed(" All (",n.allPapers,") "),c.rc(1),c.id("ngClass",c.md(10,u,"IN_PROGRESS"==n.selectedStatus)),c.rc(1),c.Ed(" Pending (",n.pendingPapers,") "),c.rc(1),c.id("ngClass",c.md(12,u,"VERIFIED"==n.selectedStatus)),c.rc(1),c.Ed(" Verified (",n.verifiedPapers,") "),c.rc(1),c.id("ngClass",c.md(14,u,"REJECTED"==n.selectedStatus)),c.rc(1),c.Ed(" Rejected (",n.rejectedPapers,") ")}}function f(e,t){if(1&e){var r=c.Mc();c.Lc(0,"div",25),c.Lc(1,"form",26),c.Xc("ngSubmit",(function(){return c.sd(r),c.bd().getPapersByUser()})),c.Lc(2,"div",27),c.Lc(3,"input",28),c.Xc("ngModelChange",(function(e){return c.sd(r),c.bd().userName=e})),c.Kc(),c.Lc(4,"button",29),c.Cd(5," submit "),c.Kc(),c.Kc(),c.Kc(),c.Kc()}if(2&e){var n=c.bd();c.rc(3),c.id("ngModel",n.userName),c.rc(1),c.id("disabled",!n.userName)}}var h=function(e){return{selected:e}};function m(e,t){if(1&e){var r=c.Mc();c.Lc(0,"tr",30),c.Lc(1,"td",31),c.Xc("click",(function(){c.sd(r);var e=t.index;return c.bd().selectPaper(e)})),c.Cd(2),c.Kc(),c.Lc(3,"td",31),c.Xc("click",(function(){c.sd(r);var e=t.index;return c.bd().selectPaper(e)})),c.Cd(4),c.Kc(),c.Lc(5,"td",31),c.Xc("click",(function(){c.sd(r);var e=t.index,n=c.bd(),i=c.rd(39);return n.deletePaper(i,e)})),c.Gc(6,"img",32),c.Kc(),c.Kc()}if(2&e){var n=t.$implicit,i=t.index,a=c.bd();c.id("ngClass",c.md(3,h,a.selectedIndex==i)),c.rc(2),c.Ed(" ",n.userName?n.userName:n.name," "),c.rc(2),c.Ed(" ",n.status," ")}}function b(e,t){1&e&&(c.Lc(0,"tr"),c.Lc(1,"td",33),c.Cd(2,"No data found!"),c.Kc(),c.Kc())}function g(e,t){1&e&&(c.Lc(0,"div",34),c.Cd(1," Loading more papers... "),c.Kc())}function v(e,t){if(1&e){var r=c.Mc();c.Lc(0,"div",35),c.Lc(1,"button",36),c.Xc("click",(function(){return(0,t.dismiss)("Cross click")})),c.Lc(2,"span",37),c.Cd(3,"\xd7"),c.Kc(),c.Kc(),c.Kc(),c.Lc(4,"div",38),c.Lc(5,"div",39),c.Lc(6,"div",40),c.Lc(7,"div",41),c.Cd(8,"Are you sure,"),c.Kc(),c.Lc(9,"div",41),c.Cd(10,"Do You want to delete this paper"),c.Kc(),c.Kc(),c.Kc(),c.Lc(11,"div",42),c.Lc(12,"button",43),c.Xc("click",(function(){return(0,t.dismiss)("Cross click")})),c.Cd(13," \xa0 \xa0 Cancel \xa0 \xa0"),c.Kc(),c.Cd(14,"\xa0 \xa0 "),c.Lc(15,"button",44),c.Xc("click",(function(){c.sd(r);var e=c.bd();return e.confirmDelete(e.deleteItemIndex)})),c.Cd(16," \xa0 \xa0 Delete \xa0 \xa0"),c.Kc(),c.Cd(17,"\xa0 "),c.Kc(),c.Kc()}}var y,L,C,S,P=((y=function(){function e(t,r,n,i){_classCallCheck(this,e),this.apiService=t,this.router=r,this.modalService=n,this.config=i,this.allPapersList=[],this.papersList=[],this.selectedPath="",this.selectedIndex=0,this.isBasedOnStatus=!0,this.selectedStatus="IN_PROGRESS",this.user="",this.userName="",this.deleteItemIndex=0,this.rejectedPapers=0,this.verifiedPapers=0,this.pendingPapers=0,this.allPapers=0,this.offset=0,this.limit=50,this.isLoading=!1,this.shouldLoadPapers=!0,this.state="default",this.config.backdrop="static",this.config.keyboard=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.user=JSON.parse(localStorage.getItem("adminUser"))||null,this.loadPapersCounts(),this.papersList=[{id:1,evaluator:"paper1",imageUrl:"https://cdn.pixabay.com/photo/2017/08/11/14/02/paper-2631126_1280.jpg",status:"Rejected"}],this.selectedPath=this.papersList[0].path}},{key:"ngAfterViewInit",value:function(){var e=this;this.observer=new IntersectionObserver((function(t){_slicedToArray(t,1)[0].isIntersecting&&!e.isLoading&&e.loadMorePapers()})),this.observer.observe(this.anchor.nativeElement),this.apiService.showLoader.next(!0),this.loadMorePapers()}},{key:"loadMorePapers",value:function(){var e=this;this.isLoading=!0,this.apiService.fetchPapersBasedOnStatus(this.selectedStatus,this.offset,this.limit).subscribe((function(t){e.allPapersList=[].concat(_toConsumableArray(e.allPapersList),_toConsumableArray(t)),e.offset+=e.limit,e.isLoading=!1,e.apiService.showLoader.next(!1)}),(function(t){e.isLoading=!1,e.handleError(t)}))}},{key:"loadPapersCounts",value:function(){var e=this;this.apiService.getStatusCounts().subscribe({next:function(t){e.verifiedPapers=t.VERIFIED,e.pendingPapers=t.IN_PROGRESS,e.rejectedPapers=t.REJECTED,e.allPapers=t.VERIFIED+t.IN_PROGRESS+t.REJECTED,console.log(t)},error:function(e){console.error("Failed to load status counts",e)}})}},{key:"handleError",value:function(e){this.apiService.showLoader.next(!1),401!==e.status?(this.apiService.genericMessage(e.error&&e.error.message&&e.error.message||"something went wrong","error"),console.log(e)):this.router.navigate(["/login"])}},{key:"getPapersByUser",value:function(){var e=this;this.apiService.showLoader.next(!0),this.apiService.fetchPapersBasedOnUser(this.userName).subscribe((function(t){e.apiService.showLoader.next(!1),e.allPapersList=t}),(function(t){e.handleError(t)}))}},{key:"selectType",value:function(e){this.isBasedOnStatus="user"!=e,this.allPapersList=[],this.selectedPath="",this.isBasedOnStatus?(this.observer.observe(this.anchor.nativeElement),this.selectStatus("IN_PROGRESS")):this.observer.disconnect()}},{key:"selectStatus",value:function(e){this.selectedStatus=e,this.offset=0,this.allPapersList=[],this.loadMorePapers()}},{key:"selectPaper",value:function(e){this.selectedIndex=e,this.selectedPath=this.allPapersList[e].signedImageUrl||this.allPapersList[e].imageUrl}},{key:"deletePaper",value:function(e,t){this.deleteItemIndex=t,this.modalService.open(e)}},{key:"confirmDelete",value:function(e){var t=this,r=this.papersList[e].imageUrl,n=this.papersList[e].status;this.apiService.showLoader.next(!0),this.apiService.deletePapers(r,n).subscribe((function(r){t.modalService.dismissAll(),t.apiService.showLoader.next(!1),t.papersList.splice(e,1)}),(function(e){t.modalService.dismissAll(),t.handleError(e)}))}},{key:"rotate",value:function(){this.state="default"===this.state?"rotate90":"rotate90"===this.state?"rotate180":"rotate180"===this.state?"rotate270":"default"}}]),e}()).\u0275fac=function(e){return new(e||y)(c.Fc(o.a),c.Fc(a.c),c.Fc(l.d),c.Fc(l.e))},y.\u0275cmp=c.zc({type:y,selectors:[["app-papers-list"]],viewQuery:function(e,t){var r;1&e&&c.yd(d,!0),2&e&&c.qd(r=c.Yc())&&(t.anchor=r.first)},decls:40,vars:13,consts:[[1,"page"],[1,"page-header","f-22","m-t-5","m-b-20","font-italic"],[1,"page-content"],[1,"row"],[1,"col-md-6"],[1,"w-100","m-auto"],[1,"d-flex","justify-content-between"],[1,"d-flex","custom-tabs","m-b-16"],[1,"list-unstyled","d-flex"],[3,"ngClass","click"],["class","d-flex justify-content-center custom-tabs m-b-16",4,"ngIf"],[1,"scrollbar","papers-list"],[1,"table-responsive"],[1,"table","text-center"],[1,"table-dark"],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[2,"height","1px"],["anchor",""],["class","text-center p-2",4,"ngIf"],[1,"col-md-6","img-container"],[1,"button-wrapper"],[1,"my-btn","my-btn-primary","mt-5","mb-4",3,"click"],[1,"img",3,"src"],["content",""],[1,"d-flex","justify-content-center","custom-tabs","m-b-16"],[3,"ngSubmit"],[1,"input-wrapper"],["type","text","name","userName",1,"form-control","form-control-sm","custom-input",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-sm","my-btn-primary",3,"disabled"],[3,"ngClass"],[1,"hover",3,"click"],["src","/assets/icons/delete_icon.png","width","20"],["colspan","4"],[1,"text-center","p-2"],[1,"modal-header","border-bottom-0"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"container-fluid",2,"padding","24px"],[1,"row","justify-content-center"],[1,"col-10","text-center"],[2,"font-weight","500"],[1,"d-flex","justify-content-center","pb-2","mt-3"],[1,"text-black-50","btn","btn-light","rounded-pill","hover",2,"font-weight","400","border","1px solid grey",3,"click"],[1,"text-white","rounded-pill","btn","btn-danger","hover",2,"font-weight","400",3,"click"]],template:function(e,t){1&e&&(c.Lc(0,"div",0),c.Lc(1,"h1",1),c.Cd(2,"Papers List"),c.Kc(),c.Lc(3,"div",2),c.Lc(4,"div",3),c.Lc(5,"div",4),c.Lc(6,"div",5),c.Lc(7,"div",6),c.Lc(8,"div",7),c.Lc(9,"ul",8),c.Lc(10,"li",9),c.Xc("click",(function(){return t.selectType("user")})),c.Cd(11," Registration Number "),c.Kc(),c.Lc(12,"li",9),c.Xc("click",(function(){return t.selectType("status")})),c.Cd(13," Verification Status "),c.Kc(),c.Kc(),c.Kc(),c.Ad(14,p,10,16,"div",10),c.Ad(15,f,6,2,"div",10),c.Kc(),c.Lc(16,"div",11),c.Lc(17,"div",12),c.Lc(18,"table",13),c.Lc(19,"thead",14),c.Lc(20,"tr"),c.Lc(21,"th"),c.Cd(22,"User Name"),c.Kc(),c.Lc(23,"th"),c.Cd(24,"Status"),c.Kc(),c.Lc(25,"th"),c.Cd(26,"Options"),c.Kc(),c.Kc(),c.Kc(),c.Lc(27,"tbody"),c.Ad(28,m,7,5,"tr",15),c.Ad(29,b,3,0,"tr",16),c.Kc(),c.Kc(),c.Gc(30,"div",17,18),c.Ad(32,g,2,0,"div",19),c.Kc(),c.Kc(),c.Kc(),c.Kc(),c.Lc(33,"div",20),c.Lc(34,"div",21),c.Lc(35,"button",22),c.Xc("click",(function(){return t.rotate()})),c.Cd(36," Rotate "),c.Kc(),c.Kc(),c.Gc(37,"img",23),c.Kc(),c.Kc(),c.Kc(),c.Ad(38,v,18,0,"ng-template",null,24,c.Bd),c.Kc()),2&e&&(c.rc(10),c.id("ngClass",c.md(9,u,!t.isBasedOnStatus)),c.rc(2),c.id("ngClass",c.md(11,u,t.isBasedOnStatus)),c.rc(2),c.id("ngIf",t.isBasedOnStatus),c.rc(1),c.id("ngIf",!t.isBasedOnStatus),c.rc(13),c.id("ngForOf",t.allPapersList),c.rc(1),c.id("ngIf",!t.papersList.length),c.rc(3),c.id("ngIf",t.isLoading),c.rc(5),c.id("@rotatedState",t.state)("src",t.selectedPath,c.vd))},directives:[n.j,n.l,n.k,i.u,i.l,i.m,i.b,i.k,i.n],styles:[".img-container[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:100%}.img-path[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:3rem;border-radius:50%}.selected[_ngcontent-%COMP%]{background-color:rgba(146,56,174,.1)}.hover[_ngcontent-%COMP%]:hover{cursor:pointer}.papers-list[_ngcontent-%COMP%]{max-height:90vh!important;overflow-y:auto}.custom-tabs[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:2px 20px!important;min-width:auto}.custom-input[_ngcontent-%COMP%]{padding:0 15px}.input-wrapper[_ngcontent-%COMP%]{display:flex;flex:1 1 auto}"],data:{animation:[Object(s.j)("rotatedState",[Object(s.g)("default",Object(s.h)({transform:"rotate(0)"})),Object(s.g)("rotate90",Object(s.h)({transform:"rotate(90deg)"})),Object(s.g)("rotate180",Object(s.h)({transform:"rotate(180deg)"})),Object(s.g)("rotate270",Object(s.h)({transform:"rotate(270deg)"})),Object(s.i)("default => rotate90",Object(s.e)("400ms ease-in")),Object(s.i)("rotate90 => rotate180",Object(s.e)("400ms ease-in")),Object(s.i)("rotate180 => rotate270",Object(s.e)("400ms ease-out")),Object(s.i)("rotate270 => default",Object(s.e)("400ms ease-out"))])]}}),y),_=[{path:"",component:(L=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),L.\u0275fac=function(e){return new(e||L)},L.\u0275cmp=c.zc({type:L,selectors:[["app-papers"]],decls:1,vars:0,template:function(e,t){1&e&&c.Gc(0,"router-outlet")},directives:[a.h],styles:[""]}),L),children:[{path:"paper-list",component:P},{path:"**",redirectTo:"paper-list",pathMatch:"full"}]}],k=((S=function e(){_classCallCheck(this,e)}).\u0275mod=c.Dc({type:S}),S.\u0275inj=c.Cc({factory:function(e){return new(e||S)},imports:[[a.g.forChild(_)],a.g]}),S),O=((C=function e(){_classCallCheck(this,e)}).\u0275mod=c.Dc({type:C}),C.\u0275inj=c.Cc({factory:function(e){return new(e||C)},imports:[[n.b,k,i.f]]}),C)}}]);