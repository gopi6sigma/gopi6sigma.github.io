function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,c=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(c.push(n.value),!t||c.length!==t);a=!0);}catch(o){s=!0,i=o}finally{try{a||null==r.return||r.return()}finally{if(s)throw i}}return c}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{zB1Z:function(e,t,r){"use strict";r.r(t),r.d(t,"PapersModule",(function(){return O}));var n=r("ofXK"),i=r("3Pt+"),c=r("tyNb"),a=r("R0Ic"),s=r("fXoL"),o=r("yTNM"),l=r("1kSV"),d=["anchor"],u=function(e){return{active:e}};function p(e,t){if(1&e){var r=s.Mc();s.Lc(0,"div",25),s.Lc(1,"ul",8),s.Lc(2,"li",9),s.Xc("click",(function(){return s.qd(r),s.Zc().selectStatus(" ")})),s.Ad(3),s.Kc(),s.Lc(4,"li",9),s.Xc("click",(function(){return s.qd(r),s.Zc().selectStatus("IN_PROGRESS")})),s.Ad(5),s.Kc(),s.Lc(6,"li",9),s.Xc("click",(function(){return s.qd(r),s.Zc().selectStatus("VERIFIED")})),s.Ad(7),s.Kc(),s.Lc(8,"li",9),s.Xc("click",(function(){return s.qd(r),s.Zc().selectStatus("REJECTED")})),s.Ad(9),s.Kc(),s.Kc(),s.Kc()}if(2&e){var n=s.Zc();s.rc(2),s.gd("ngClass",s.kd(8,u," "==n.selectedStatus)),s.rc(1),s.Cd(" All (",n.allPapers,") "),s.rc(1),s.gd("ngClass",s.kd(10,u,"IN_PROGRESS"==n.selectedStatus)),s.rc(1),s.Cd(" Pending (",n.pendingPapers,") "),s.rc(1),s.gd("ngClass",s.kd(12,u,"VERIFIED"==n.selectedStatus)),s.rc(1),s.Cd(" Verified (",n.verifiedPapers,") "),s.rc(1),s.gd("ngClass",s.kd(14,u,"REJECTED"==n.selectedStatus)),s.rc(1),s.Cd(" Rejected (",n.rejectedPapers,") ")}}function f(e,t){if(1&e){var r=s.Mc();s.Lc(0,"div",25),s.Lc(1,"form",26),s.Xc("ngSubmit",(function(){return s.qd(r),s.Zc().getPapersByUser()})),s.Lc(2,"div",27),s.Lc(3,"input",28),s.Xc("ngModelChange",(function(e){return s.qd(r),s.Zc().userName=e})),s.Kc(),s.Lc(4,"button",29),s.Ad(5," submit "),s.Kc(),s.Kc(),s.Kc(),s.Kc()}if(2&e){var n=s.Zc();s.rc(3),s.gd("ngModel",n.userName),s.rc(1),s.gd("disabled",!n.userName)}}var h=function(e){return{selected:e}};function g(e,t){if(1&e){var r=s.Mc();s.Lc(0,"tr",30),s.Lc(1,"td",31),s.Xc("click",(function(){s.qd(r);var e=t.index;return s.Zc().selectPaper(e)})),s.Ad(2),s.Kc(),s.Lc(3,"td",31),s.Xc("click",(function(){s.qd(r);var e=t.index;return s.Zc().selectPaper(e)})),s.Ad(4),s.Kc(),s.Lc(5,"td",31),s.Xc("click",(function(){s.qd(r);var e=t.index,n=s.Zc(),i=s.pd(39);return n.deletePaper(i,e)})),s.Gc(6,"img",32),s.Kc(),s.Kc()}if(2&e){var n=t.$implicit,i=t.index,c=s.Zc();s.gd("ngClass",s.kd(3,h,c.selectedIndex==i)),s.rc(2),s.Cd(" ",n.userName?n.userName:n.name," "),s.rc(2),s.Cd(" ",n.status," ")}}function m(e,t){1&e&&(s.Lc(0,"tr"),s.Lc(1,"td",33),s.Ad(2,"No data found!"),s.Kc(),s.Kc())}function b(e,t){1&e&&(s.Lc(0,"div",34),s.Ad(1," Loading more papers... "),s.Kc())}function v(e,t){if(1&e){var r=s.Mc();s.Lc(0,"div",35),s.Lc(1,"button",36),s.Xc("click",(function(){return(0,t.dismiss)("Cross click")})),s.Lc(2,"span",37),s.Ad(3,"\xd7"),s.Kc(),s.Kc(),s.Kc(),s.Lc(4,"div",38),s.Lc(5,"div",39),s.Lc(6,"div",40),s.Lc(7,"div",41),s.Ad(8,"Are you sure,"),s.Kc(),s.Lc(9,"div",41),s.Ad(10,"Do You want to delete this paper"),s.Kc(),s.Kc(),s.Kc(),s.Lc(11,"div",42),s.Lc(12,"button",43),s.Xc("click",(function(){return(0,t.dismiss)("Cross click")})),s.Ad(13," \xa0 \xa0 Cancel \xa0 \xa0"),s.Kc(),s.Ad(14,"\xa0 \xa0 "),s.Lc(15,"button",44),s.Xc("click",(function(){s.qd(r);var e=s.Zc();return e.confirmDelete(e.deleteItemIndex)})),s.Ad(16," \xa0 \xa0 Delete \xa0 \xa0"),s.Kc(),s.Ad(17,"\xa0 "),s.Kc(),s.Kc()}}var y,L,S,P,C=((y=function(){function e(t,r,n,i){_classCallCheck(this,e),this.apiService=t,this.router=r,this.modalService=n,this.config=i,this.allPapersList=[],this.papersList=[],this.selectedPath="",this.selectedIndex=0,this.isBasedOnStatus=!0,this.selectedStatus="IN_PROGRESS",this.user="",this.userName="",this.deleteItemIndex=0,this.rejectedPapers=0,this.verifiedPapers=0,this.pendingPapers=0,this.allPapers=0,this.offset=0,this.limit=50,this.isLoading=!1,this.shouldLoadPapers=!0,this.state="default",this.config.backdrop="static",this.config.keyboard=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.user=JSON.parse(localStorage.getItem("adminUser"))||null,this.loadPapersCounts(),this.papersList=[{id:1,evaluator:"paper1",imageUrl:"https://cdn.pixabay.com/photo/2017/08/11/14/02/paper-2631126_1280.jpg",status:"Rejected"}],this.selectedPath=this.papersList[0].path}},{key:"ngAfterViewInit",value:function(){var e=this;this.observer=new IntersectionObserver((function(t){_slicedToArray(t,1)[0].isIntersecting&&!e.isLoading&&e.loadMorePapers()})),this.observer.observe(this.anchor.nativeElement),this.apiService.showLoader.next(!0),this.loadMorePapers()}},{key:"loadMorePapers",value:function(){var e=this;this.isLoading=!0,this.apiService.fetchPapersBasedOnStatus(this.selectedStatus,this.offset,this.limit).subscribe((function(t){e.allPapersList=[].concat(_toConsumableArray(e.allPapersList),_toConsumableArray(t)),e.offset+=e.limit,e.isLoading=!1,e.apiService.showLoader.next(!1)}),(function(t){e.isLoading=!1,e.handleError(t)}))}},{key:"loadPapersCounts",value:function(){var e=this;this.apiService.getStatusCounts().subscribe({next:function(t){e.verifiedPapers=t.VERIFIED,e.pendingPapers=t.IN_PROGRESS,e.rejectedPapers=t.REJECTED,e.allPapers=t.VERIFIED+t.IN_PROGRESS+t.REJECTED,console.log(t)},error:function(e){console.error("Failed to load status counts",e)}})}},{key:"handleError",value:function(e){this.apiService.showLoader.next(!1),401!==e.status?(this.apiService.genericMessage(e.error&&e.error.message&&e.error.message||"something went wrong","error"),console.log(e)):this.router.navigate(["/login"])}},{key:"getPapersByUser",value:function(){var e=this;this.apiService.showLoader.next(!0),this.apiService.fetchPapersBasedOnUser(this.userName).subscribe((function(t){e.apiService.showLoader.next(!1),e.allPapersList=t}),(function(t){e.handleError(t)}))}},{key:"selectType",value:function(e){this.isBasedOnStatus="user"!=e,this.allPapersList=[],this.selectedPath="",this.isBasedOnStatus?(this.observer.observe(this.anchor.nativeElement),this.selectStatus("IN_PROGRESS")):this.observer.disconnect()}},{key:"selectStatus",value:function(e){this.selectedStatus=e,this.offset=0,this.allPapersList=[],this.loadMorePapers()}},{key:"selectPaper",value:function(e){this.selectedIndex=e,this.selectedPath=this.allPapersList[e].signedImageUrl||this.allPapersList[e].imageUrl}},{key:"deletePaper",value:function(e,t){this.deleteItemIndex=t,this.modalService.open(e)}},{key:"confirmDelete",value:function(e){var t=this,r=this.papersList[e].imageUrl,n=this.papersList[e].status;this.apiService.showLoader.next(!0),this.apiService.deletePapers(r,n).subscribe((function(r){t.modalService.dismissAll(),t.apiService.showLoader.next(!1),t.papersList.splice(e,1)}),(function(e){t.modalService.dismissAll(),t.handleError(e)}))}},{key:"rotate",value:function(){this.state="default"===this.state?"rotate90":"rotate90"===this.state?"rotate180":"rotate180"===this.state?"rotate270":"default"}}]),e}()).\u0275fac=function(e){return new(e||y)(s.Fc(o.a),s.Fc(c.c),s.Fc(l.d),s.Fc(l.e))},y.\u0275cmp=s.zc({type:y,selectors:[["app-papers-list"]],viewQuery:function(e,t){var r;1&e&&s.wd(d,!0),2&e&&s.od(r=s.Yc())&&(t.anchor=r.first)},decls:40,vars:13,consts:[[1,"page"],[1,"page-header","f-22","m-t-5","m-b-20","font-italic"],[1,"page-content"],[1,"row"],[1,"col-md-6"],[1,"w-100","m-auto"],[1,"d-flex","justify-content-between"],[1,"d-flex","custom-tabs","m-b-16"],[1,"list-unstyled","d-flex"],[3,"ngClass","click"],["class","d-flex justify-content-center custom-tabs m-b-16",4,"ngIf"],[1,"scrollbar","papers-list"],[1,"table-responsive"],[1,"table","text-center"],[1,"table-dark"],[3,"ngClass",4,"ngFor","ngForOf"],[4,"ngIf"],[2,"height","1px"],["anchor",""],["class","text-center p-2",4,"ngIf"],[1,"col-md-6","img-container"],[1,"button-wrapper"],[1,"my-btn","my-btn-primary","mt-5","mb-4",3,"click"],[1,"img",3,"src"],["content",""],[1,"d-flex","justify-content-center","custom-tabs","m-b-16"],[3,"ngSubmit"],[1,"input-wrapper"],["type","text","name","userName",1,"form-control","form-control-sm","custom-input",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-sm","my-btn-primary",3,"disabled"],[3,"ngClass"],[1,"hover",3,"click"],["src","/assets/icons/delete_icon.png","width","20"],["colspan","4"],[1,"text-center","p-2"],[1,"modal-header","border-bottom-0"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"container-fluid",2,"padding","24px"],[1,"row","justify-content-center"],[1,"col-10","text-center"],[2,"font-weight","500"],[1,"d-flex","justify-content-center","pb-2","mt-3"],[1,"text-black-50","btn","btn-light","rounded-pill","hover",2,"font-weight","400","border","1px solid grey",3,"click"],[1,"text-white","rounded-pill","btn","btn-danger","hover",2,"font-weight","400",3,"click"]],template:function(e,t){1&e&&(s.Lc(0,"div",0),s.Lc(1,"h1",1),s.Ad(2,"Papers List"),s.Kc(),s.Lc(3,"div",2),s.Lc(4,"div",3),s.Lc(5,"div",4),s.Lc(6,"div",5),s.Lc(7,"div",6),s.Lc(8,"div",7),s.Lc(9,"ul",8),s.Lc(10,"li",9),s.Xc("click",(function(){return t.selectType("user")})),s.Ad(11," Registration Number "),s.Kc(),s.Lc(12,"li",9),s.Xc("click",(function(){return t.selectType("status")})),s.Ad(13," Verification Status "),s.Kc(),s.Kc(),s.Kc(),s.yd(14,p,10,16,"div",10),s.yd(15,f,6,2,"div",10),s.Kc(),s.Lc(16,"div",11),s.Lc(17,"div",12),s.Lc(18,"table",13),s.Lc(19,"thead",14),s.Lc(20,"tr"),s.Lc(21,"th"),s.Ad(22,"User Name"),s.Kc(),s.Lc(23,"th"),s.Ad(24,"Status"),s.Kc(),s.Lc(25,"th"),s.Ad(26,"Options"),s.Kc(),s.Kc(),s.Kc(),s.Lc(27,"tbody"),s.yd(28,g,7,5,"tr",15),s.yd(29,m,3,0,"tr",16),s.Kc(),s.Kc(),s.Gc(30,"div",17,18),s.yd(32,b,2,0,"div",19),s.Kc(),s.Kc(),s.Kc(),s.Kc(),s.Lc(33,"div",20),s.Lc(34,"div",21),s.Lc(35,"button",22),s.Xc("click",(function(){return t.rotate()})),s.Ad(36," Rotate "),s.Kc(),s.Kc(),s.Gc(37,"img",23),s.Kc(),s.Kc(),s.Kc(),s.yd(38,v,18,0,"ng-template",null,24,s.zd),s.Kc()),2&e&&(s.rc(10),s.gd("ngClass",s.kd(9,u,!t.isBasedOnStatus)),s.rc(2),s.gd("ngClass",s.kd(11,u,t.isBasedOnStatus)),s.rc(2),s.gd("ngIf",t.isBasedOnStatus),s.rc(1),s.gd("ngIf",!t.isBasedOnStatus),s.rc(13),s.gd("ngForOf",t.allPapersList),s.rc(1),s.gd("ngIf",!t.papersList.length),s.rc(3),s.gd("ngIf",t.isLoading),s.rc(5),s.gd("@rotatedState",t.state)("src",t.selectedPath,s.td))},directives:[n.j,n.l,n.k,i.v,i.m,i.n,i.c,i.l,i.o],styles:[".img-container[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:100%}.img-path[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:3rem;height:3rem;border-radius:50%}.selected[_ngcontent-%COMP%]{background-color:rgba(146,56,174,.1)}.hover[_ngcontent-%COMP%]:hover{cursor:pointer}.papers-list[_ngcontent-%COMP%]{max-height:90vh!important;overflow-y:auto}.custom-tabs[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:2px 20px!important;min-width:auto}.custom-input[_ngcontent-%COMP%]{padding:0 15px}.input-wrapper[_ngcontent-%COMP%]{display:flex;flex:1 1 auto}"],data:{animation:[Object(a.j)("rotatedState",[Object(a.g)("default",Object(a.h)({transform:"rotate(0)"})),Object(a.g)("rotate90",Object(a.h)({transform:"rotate(90deg)"})),Object(a.g)("rotate180",Object(a.h)({transform:"rotate(180deg)"})),Object(a.g)("rotate270",Object(a.h)({transform:"rotate(270deg)"})),Object(a.i)("default => rotate90",Object(a.e)("400ms ease-in")),Object(a.i)("rotate90 => rotate180",Object(a.e)("400ms ease-in")),Object(a.i)("rotate180 => rotate270",Object(a.e)("400ms ease-out")),Object(a.i)("rotate270 => default",Object(a.e)("400ms ease-out"))])]}}),y),k=[{path:"",component:(L=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),L.\u0275fac=function(e){return new(e||L)},L.\u0275cmp=s.zc({type:L,selectors:[["app-papers"]],decls:1,vars:0,template:function(e,t){1&e&&s.Gc(0,"router-outlet")},directives:[c.h],styles:[""]}),L),children:[{path:"paper-list",component:C},{path:"**",redirectTo:"paper-list",pathMatch:"full"}]}],_=((P=function e(){_classCallCheck(this,e)}).\u0275mod=s.Dc({type:P}),P.\u0275inj=s.Cc({factory:function(e){return new(e||P)},imports:[[c.g.forChild(k)],c.g]}),P),O=((S=function e(){_classCallCheck(this,e)}).\u0275mod=s.Dc({type:S}),S.\u0275inj=s.Cc({factory:function(e){return new(e||S)},imports:[[n.b,_,i.g]]}),S)}}]);